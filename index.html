<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TestoVeten</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --background-color: #f0f3f5;
            --card-bg: #ffffff;
            --text-dark: #2d3436;
            --text-light: #636e72;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--background-color); color: var(--text-dark); line-height: 1.6; display: flex; flex-direction: column; min-height: 100vh; }
        header { background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; padding: 40px 20px; text-align: center; border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; box-shadow: 0 4px 15px rgba(108, 92, 231, 0.2); }
        header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        header p { font-size: 1.1rem; opacity: 0.9; }
        .container { max-width: 1000px; margin: -30px auto 40px; padding: 20px; flex: 1; }
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .card { background: var(--card-bg); padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: all 0.3s ease; cursor: pointer; text-align: center; border-top: 5px solid transparent; position: relative; overflow: hidden; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(0,0,0,0.1); border-top-color: var(--primary-color); }
        .icon { font-size: 3rem; margin-bottom: 15px; display: block; }
        .card h3 { font-size: 1.3rem; margin-bottom: 8px; color: var(--text-dark); }
        .card p { color: var(--text-light); font-size: 0.9rem; }
        .quiz-container, .result-container { background: var(--card-bg); padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); display: none; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .question-item { margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
        .question-text { font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; }
        .options-group { display: flex; justify-content: space-between; background: #f8f9fa; padding: 10px; border-radius: 10px; flex-wrap: wrap; }
        .option-label { display: flex; flex-direction: column; align-items: center; cursor: pointer; width: 18%; font-size: 0.8rem; text-align: center; color: var(--text-light); padding: 5px; }
        .option-label:hover { color: var(--primary-color); background: #eee; border-radius: 5px;}
        input[type="radio"] { margin-bottom: 5px; accent-color: var(--primary-color); transform: scale(1.2); cursor: pointer; }
        .btn { background-color: var(--primary-color); color: white; border: none; padding: 15px 30px; border-radius: 10px; font-size: 1rem; font-weight: 600; cursor: pointer; width: 100%; margin-top: 15px; transition: background 0.3s; }
        .btn:hover { background-color: #5649c0; }
        .btn-outline { background: transparent; border: 2px solid #ccc; color: #666; margin-top: 10px; }
        .btn-outline:hover { border-color: #333; color: #333; }
        .score-circle { width: 140px; height: 140px; border-radius: 50%; border: 8px solid var(--primary-color); display: flex; align-items: center; justify-content: center; font-size: 2.2rem; font-weight: bold; margin: 0 auto 20px; color: var(--primary-color); }
        .interpretation { text-align: center; font-size: 1.1rem; margin-bottom: 30px; }
        footer { text-align: center; padding: 20px; font-size: 0.8rem; color: var(--text-light); margin-top: auto; }
        @media (max-width: 600px) { .options-group { flex-direction: column; } .option-label { width: 100%; flex-direction: row; justify-content: flex-start; margin-bottom: 5px; padding: 10px; background: white; border-radius: 5px; border: 1px solid #eee; } input[type="radio"] { margin-right: 15px; margin-bottom: 0; } }
    </style>
</head>
<body>
    <header><h1>TestoVeten</h1><p>Zbulo anÃ«n tÃ«nde tÃ« fshehtÃ« pÃ«rmes psikologjisÃ«</p></header>
    <div class="container">
        <div id="menu-view" class="menu-grid"></div>
        <div id="quiz-view" class="quiz-container">
            <h2 id="quiz-title" style="text-align: center; margin-bottom: 20px; color: var(--primary-color);"></h2>
            <div id="questions-wrapper"></div>
            <button class="btn" onclick="submitQuiz()">Shiko Rezultatin</button>
            <button class="btn btn-outline" onclick="goHome()">Anulo</button>
        </div>
        <div id="result-view" class="result-container">
            <h2 style="text-align: center; margin-bottom:20px;">Rezultati Juaj</h2>
            <div id="score-circle" class="score-circle">0%</div>
            <div id="result-text" class="interpretation"></div>
            <button class="btn" onclick="goHome()">Zgjidh njÃ« Test TjetÃ«r</button>
        </div>
    </div>
    <footer>&copy; 2026 TestoVeten - PlatformÃ« Edukative</footer>
    <script>
        window.onerror = function(msg, url, lineNo) { alert("GABIM: " + msg + "\nRrjeshti: " + lineNo); return false; };
        const tests = {
            islamofobia: {
                title: "Islamofobia",
                icon: "ğŸ•Œ",
                desc: "Analizo perceptimin tÃ«nd ndaj besimtarÃ«ve myslimanÃ«.",
                questions: ["Ndihem i pasigurt kur shoh njÃ« grua me shami ose burrÃ« me mjekÃ«r.", "Besoj se rritja e numrit tÃ« xhamive Ã«shtÃ« rrezik pÃ«r kulturÃ«n.", "Mendoj se vlerat islame bien ndesh me lirinÃ«.", "Do tÃ« hezitoja tÃ« punÃ«soja dikÃ« qÃ« falet nÃ« punÃ«.", "Termat si 'Xhihad' mÃ« ngjallin menjÃ«herÃ« frikÃ«.", "Mendoj se ezani (thirrja pÃ«r namaz) Ã«shtÃ« zhurmÃ« e bezdisshme.", "Do tÃ« irritohesha nÃ«se vajza/djali im do tÃ« fillonte tÃ« falej.", "Besoj se feja duhet tÃ« mbahet vetÃ«m brenda shtÃ«pisÃ«, kurrÃ« nÃ« publik."]
            },
            ksenofobia: {
                title: "Ksenofobia",
                icon: "ğŸŒ",
                desc: "QÃ«ndrimet ndaj tÃ« huajve dhe emigrantÃ«ve.",
                questions: ["EmigrantÃ«t marrin vendet e punÃ«s dhe ulin pagat.", "Nuk do doja qÃ« njÃ« i huaj tÃ« martohej nÃ« familjen time.", "Diversiteti kulturor dobÃ«son kombin.", "TÃ« huajt duhet tÃ« heqin dorÃ« nga kultura e tyre.", "Ndihem i pasigurt kur dÃ«gjoj gjuhÃ« tÃ« huaja nÃ« rrugÃ«.", "MÃ« pengon kur shoh shumÃ« tÃ« huaj nÃ« qytetin tim.", "Besoj se raca/kombÃ«sia ime Ã«shtÃ« natyrshÃ«m mÃ« inteligjente.", "Qeveria shpenzon tepÃ«r para pÃ«r refugjatÃ«t."]
            },
            seksizmi: {
                title: "Seksizmi",
                icon: "âš–ï¸",
                desc: "Stereotipet gjinore burrÃ«/grua.",
                questions: ["GratÃ« janÃ« mÃ« emocionale dhe mÃ« pak logjike se burrat.", "Detyra kryesore e gruas Ã«shtÃ« shtÃ«pia.", "Burrat kanÃ« mÃ« shumÃ« tÃ« drejtÃ« pÃ«r punÃ« se gratÃ«.", "Veshja provokuese justifikon ngacmimin.", "Burrat duhet tÃ« kenÃ« fjalÃ«n e fundit nÃ« familje.", "NjÃ« burrÃ« qÃ« qan tregon shenja dobÃ«sie.", "Ã‹shtÃ« e papranueshme qÃ« gruaja tÃ« fitojÃ« mÃ« shumÃ« para se burri.", "GratÃ« shpesh e pÃ«rdorin 'viktimizimin' pÃ«r tÃ« pÃ«rfituar."]
            },
            snobizmi: {
                title: "Snobizmi",
                icon: "ğŸ’",
                desc: "A gjykon njerÃ«zit nga paratÃ« dhe statusi?",
                questions: ["NjerÃ«zit me rroba tÃ« lira s'kanÃ« shije.", "Do mÃ« vinte turp nÃ«se partneri ka makinÃ« tÃ« vjetÃ«r.", "TÃ« pasurit janÃ« mÃ« tÃ« zgjuar se tÃ« varfrit.", "Pa iPhone je mbrapa me kohÃ«n.", "Respektoj mÃ« shumÃ« ata qÃ« vishen shtrenjtÃ«.", "Ndihem keq nÃ«se mÃ« shohin duke blerÃ« gjÃ«ra tÃ« lira.", "Pushimet nÃ« vendet e rajonit janÃ« pÃ«r ata pa buxhet.", "E gjykoj njeriun kryesisht nga dukja e jashtme."]
            },
            bodyimage: {
                title: "Fatfobia / Trupi",
                icon: "ğŸ”", 
                desc: "Paragjykimet ndaj njerÃ«zve mbipeshÃ«.",
                questions: ["NjerÃ«zit mbipeshÃ« janÃ« thjesht dembelÃ«.", "Do mÃ« vinte zor tÃ« prezantoja partnerin mbipeshÃ«.", "TÃ« shÃ«ndoshÃ«t s'duhet tÃ« veshin rroba tÃ« ngushta.", "Gjykoj njerÃ«zit bazuar nÃ« peshÃ«n e tyre.", "Vlera e njeriut varet nga sa tÃ«rheqÃ«s Ã«shtÃ«.", "Mendoj se njerÃ«zit e shÃ«ndoshÃ« hanÃ« shumÃ« pa kontroll.", "Do t'i sugjeroja dikujt tÃ« dobÃ«sohej edhe pa ma kÃ«rkuar mendimin.", "NjerÃ«zit me trup perfekt janÃ« mÃ« tÃ« suksesshÃ«m nÃ« jetÃ«."]
            },
            narcizmi: {
                title: "Narcizmi (Ego)",
                icon: "ğŸª",
                desc: "Sa je i dashuruar me veten?",
                questions: ["Jam shumÃ« mÃ« i talentuar se tÃ« tjerÃ«t.", "MÃ« acaron kur s'mÃ« kushtojnÃ« vÃ«mendje.", "Rregullat vlejnÃ« pÃ«r tÃ« tjerÃ«t, jo pÃ«r mua.", "NjerÃ«zit duhet tÃ« mÃ« admirojnÃ«.", "E kam vÃ«shtirÃ« tÃ« ndjej keqardhje pÃ«r tÃ« tjerÃ«t.", "Shpesh e shoh veten nÃ« vitrina dyqanesh duke ecur.", "Bota do ishte vend mÃ« i mirÃ« nÃ«se tÃ« gjithÃ« mendonin si unÃ«.", "MÃ« duket humbje kohe tÃ« dÃ«gjoj problemet e tÃ« tjerÃ«ve."]
            },
            rajonalizmi: {
                title: "Krahinorizmi",
                icon: "ğŸ—ºï¸",
                desc: "Paragjykimet Katundar vs Qytetar.",
                questions: ["NjerÃ«zit nga fshati s'bÃ«hen kurrÃ« qytetarÃ«.", "S'do martohesha me dikÃ« nga njÃ« rajon tjetÃ«r.", "Dialekti tregon inteligjencÃ«n e njeriut.", "Qyteti im Ã«shtÃ« i vetmi vend i civilizuar.", "Stereotipet pÃ«r krahinat janÃ« tÃ« vÃ«rteta.", "MÃ« vrasin veshin thekse tÃ« caktuara nÃ« TV.", "NÃ«se dikush ka mbiemÃ«r fshati, supozoj se Ã«shtÃ« i prapambetur.", "Kultura qytetare po zhduket pÃ«r shkak tÃ« tÃ« ardhurve."]
            },
            akademizmi: {
                title: "Elitizmi Akademik",
                icon: "ğŸ“",
                desc: "A i gjykon njerÃ«zit bazuar nÃ« diplomat?",
                questions: ["NjerÃ«zit pa diplomÃ« universiteti janÃ« mÃ« pak inteligjentÃ«.", "Nuk do tÃ« martohesha kurrÃ« me dikÃ« qÃ« ka vetÃ«m shkollÃ« tÃ« mesme.", "MÃ« acaron shumÃ« kur dikush bÃ«n gabime gramatikore nÃ« Facebook.", "NjÃ« punÃ« nÃ« zyrÃ« Ã«shtÃ« gjithmonÃ« mÃ« e respektueshme se njÃ« punÃ« fizike.", "Nuk i marr seriozisht opinionet e njerÃ«zve pa shkollÃ«.", "Suksesi i vÃ«rtetÃ« arrihet vetÃ«m pÃ«rmes universitetit.", "Mendoj se titujt akademikÃ« (Dr, Prof) tÃ« bÃ«jnÃ« njeri mÃ« tÃ« mirÃ«.", "E kam tÃ« vÃ«shtirÃ« tÃ« bÃ«j muhabet me njerÃ«z qÃ« s'kanÃ« lexuar libra."]
            }
        };

        // LINKU YT I GOOGLE SHEET
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyVp0LOz4cXvQ1--YrlbK3XZIRbwncqcGYnfEA_-p3R7q0ZjHx2rCGx0QnZUdn5xsnl/exec"; 

        let currentTestKey = null;

        window.addEventListener('hashchange', function() { if (!window.location.hash) goHome(false); });

        function init() {
            const menu = document.getElementById('menu-view');
            menu.innerHTML = '';
            for (const key in tests) {
                const test = tests[key];
                const card = `<div class="card" onclick="startTest('${key}')"><span class="icon">${test.icon}</span><h3>${test.title}</h3><p>${test.desc}</p></div>`;
                menu.innerHTML += card;
            }
            document.getElementById('menu-view').style.display = 'grid';
            document.getElementById('quiz-view').style.display = 'none';
            document.getElementById('result-view').style.display = 'none';
        }

        function startTest(key) {
            currentTestKey = key;
            const data = tests[key];
            window.location.hash = "test";
            document.getElementById('menu-view').style.display = 'none';
            document.getElementById('result-view').style.display = 'none';
            document.getElementById('quiz-view').style.display = 'block';
            document.getElementById('quiz-title').innerText = data.title;
            const wrapper = document.getElementById('questions-wrapper');
            wrapper.innerHTML = '';
            data.questions.forEach((q, index) => {
                const html = `<div class="question-item"><div class="question-text">${index + 1}. ${q}</div><div class="options-group"><label class="option-label"><input type="radio" name="q${index}" value="1"><span>S'pajtohem fare</span></label><label class="option-label"><input type="radio" name="q${index}" value="2"><span>S'pajtohem</span></label><label class="option-label"><input type="radio" name="q${index}" value="3"><span>AsnjanÃ«s</span></label><label class="option-label"><input type="radio" name="q${index}" value="4"><span>Pajtohem</span></label><label class="option-label"><input type="radio" name="q${index}" value="5"><span>Pajtohem plotÃ«sisht</span></label></div></div>`;
                wrapper.innerHTML += html;
            });
            window.scrollTo(0, 0);
        }

        function submitQuiz() {
            const questions = tests[currentTestKey].questions;
            let totalScore = 0; let answeredCount = 0;
            for (let i = 0; i < questions.length; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if (selected) { totalScore += parseInt(selected.value); answeredCount++; }
            }
            if (answeredCount < questions.length) { alert("Ju lutem pÃ«rgjigjuni tÃ« gjitha pyetjeve!"); return; }
            
            const minPossible = questions.length * 1;
            const maxPossible = questions.length * 5;
            const percentage = Math.round(((totalScore - minPossible) / (maxPossible - minPossible)) * 100);

            // DÃ«rgojmÃ« te GoogleSheet
            fetch(GOOGLE_SCRIPT_URL, {
                method: "POST",
                mode: "no-cors",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ testi: tests[currentTestKey].title, rezultati: percentage + "%" })
            }).then(() => console.log("Data sent!"));

            showResult(percentage);
        }

        function showResult(percentage) {
            document.getElementById('quiz-view').style.display = 'none';
            document.getElementById('result-view').style.display = 'block';
            const circle = document.getElementById('score-circle');
            const textDiv = document.getElementById('result-text');
            circle.innerText = percentage + "%";
            let color, title, text;
            if (percentage <= 25) { color = "#00b894"; title = "Nivel i UlÃ«t"; text = "Bravo! Ti ke njÃ« mendje shumÃ« tÃ« hapur dhe nuk ndikohesh nga kÃ«to paragjykime."; } 
            else if (percentage <= 50) { color = "#0984e3"; title = "Nivel Mesatar"; text = "Je pÃ«rgjithÃ«sisht njeri i mirÃ«, por ndonjÃ«herÃ« ndikohesh nga shoqÃ«ria ose stereotipet."; } 
            else if (percentage <= 75) { color = "#fdcb6e"; title = "Nivel i LartÃ«"; text = "Kujdes! PÃ«rgjigjet tregojnÃ« qÃ« ke paragjykime tÃ« forta. Mundohu tÃ« jesh mÃ« empatik."; } 
            else { color = "#d63031"; title = "Nivel Kritik"; text = "Rezultati tregon intolerancÃ« ose fobi tÃ« lartÃ«. Ã‹shtÃ« mirÃ« tÃ« reflektosh mbi kÃ«to mendime."; }
            circle.style.borderColor = color; circle.style.color = color;
            textDiv.innerHTML = `<h3 style="color:${color}">${title}</h3><p>${text}</p>`;
            window.scrollTo(0, 0);
        }

        function goHome(useHistory = true) {
            document.getElementById('result-view').style.display = 'none';
            document.getElementById('quiz-view').style.display = 'none';
            document.getElementById('menu-view').style.display = 'grid';
            currentTestKey = null;
            if (useHistory && window.location.hash) history.back(); else window.location.hash = "";
            window.scrollTo(0, 0);
        }
        init();
    </script>

</body>
</html>
